{% extends 'base.html' %}
{% load static %}

<!DOCTYPE html>
<h1 lang="ko">

{% block title %}Cake Store Detail{% endblock %}

{% block css %}
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

{% endblock %}

{% block content %}
<br><br><br><br><br><br><br><br><br><br>
<a href="{% url 'location_result'%}" style="margin-left:45%;">ê±°ë¦¬ ê°€ê¹Œìš´ ìˆœìœ¼ë¡œ ì •ë ¬</a>

<p class = "store_list"> 
{% if list %}
    {% for post in list %}
    <div class="cardStore" style="margin-left: 40%;">
        <a href="{% url 'store_detail' pk=post.pk %}" class="goDetail"><img src="{{post.store_image.url}}" class="cardImg" alt=""></a>
        <div class="cardStore-last">
            <div class="titleText">
                <p class="cardTitle">ğŸ“ {{post.name}} - {{ post.location}}</p>
            </div>
        </div>
        </div>
    {% endfor %}

{% elif search_term %}
<b><i> ì£¼ë³€ 2kmì— ìˆëŠ” ì¼€ì´í¬ ê°€ê²ŒëŠ” ì—†ìŠµë‹ˆë‹¤ ã… ã… ..</i></b>
{% endif %}
</p>


<script>
// í˜„ì¬ ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¤ëŠ” getPosition í”„ë¡œë¯¸ìŠ¤ ìƒì„±
var getPosition = function (options) {
  return new Promise(function (resolve, reject) {
    var options = {
    enableHighAccuracy: true,
    maximumAge: 0,
    timeout: 10000
  }
    navigator.geolocation.getCurrentPosition(resolve, reject, options);
  })
}
// getPosition í”„ë¡œë¯¸ìŠ¤ ì‹¤í–‰
// ê²°ê³¼ê°’ì´ ìˆì„ ê²½ìš° ì¿ í‚¤ì— ì •ë³´ë¥¼ ì €ì¥í•˜ê³ , ì—†ì„ ê²½ìš° Errorë¥¼ Logì— ì°ëŠ”ë‹¤
getPosition()
  .then((position) => {
    $.cookie("latitude", position.coords.latitude, { path: '/' })
    $.cookie("longitude", position.coords.longitude, { path: '/' })
  })
  .catch((err)=> {
    console.log(err)
  })
</script>

</html>
{% endblock %}