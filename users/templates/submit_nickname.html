{% load static %}

<!DOCTYPE html>
<html lang="ko">

    <head>
        <meta charset="UTF-8">
        <meta name="description" content="Cake Order Service">
        <title>Allcakes ë‹‰ë„¤ì„ ì„¤ì •</title>
    
    
        <!--ë¶€íŠ¸ìŠ¤íŠ¸ë© (orderëŠ” ìƒë‹¨ë°” ë©”ë‰´ë“¤ì´ ë‹¬ë¼ì ¸ì•¼ í•  ê²ƒ ê°™ì•„ì„œ )-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        <link rel="stylesheet" href="{% static 'css/nickname.css' %}">
    </head>
    

<body>


    <!--ìƒˆë¡œ ë¶™ì—¬ë„£ì€ header-->
    <header>
        <nav class="navbar fixed-top navbar-expand-lg navbar-light" style="background-color: white;">
            <div class="container-fluid">
                <a class="navbar-brand" href="/">ALLCAKES</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <!-- ê°€ê²Œ ìƒì„¸ì •ë³´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë„ë¡ ì„ì‹œë¡œ ë§í¬ ë‹¬ì•„ ë‘”ê±°ê³  -->
                        <!-- ë¦¬ë·°ëŠ” ë§ˆì´í˜ì´ì§€ ì°¸ê³  -->
						<li class="nav-item ">
                            <a class="nav-link px-2" href="{% url 'stores_all' %}">Stores</a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link px-2" href="{% url 'cakes_all' %}">Cakes</a>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link px-2" href="{% url 'search_all' %}">Search</a>
                        </li>
                    </ul>
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <!--ë¡œê·¸ì¸ or ë¡œê·¸ì•„ì›ƒ-->
                        <li class="nav-item">
                            {% if user.is_authenticated %}
                            {% if user.is_kakao == True %}
                            <!-- ì¸ì¦ëœ ìƒíƒœì—ì„œ ì¹´ì¹´ì˜¤ì¸ ê²½ìš°, ì•„ë‹Œ ê²½ìš°-->
                            <a class="nav-link px-2" href="{% url 'logout_with_kakao' %}">Logout</a>
                            {% else %}
                            <a class="nav-link px-2" href="{% url 'logout' %}">Logout</a>
                            {% endif %}

                            {% else %}
                            <!-- ì¸ì¦ë˜ì§€ ì•Šì€ ìƒíƒœë©´ ë¡œê·¸ì¸(ê°€ì…) ë§í¬ -->
                            <a class="nav-link px-2" href="{% url 'login_home' %}">Login</a>
                            {% endif %}
                        </li>
                        <!--ë¡œê·¸ì¸ê³¼ ë¡œê·¸ì•„ì›ƒë§Œ ëœ¸ -->

                        <!--ë§ˆì´í˜ì´ì§€ or about us-->
                        <li class="nav-item">

                            {% if user.is_authenticated %}
                            <!-- ìœ ì €ê°€ ë¡œê·¸ì¸ ìƒíƒœì´ë©´ ìƒë‹¨ì— ëœ¨ê³  í´ë¦­ ì‹œ ìœ ì € pkì „ë‹¬ -->
                            <a class="nav-link px-2" href="{% url 'mypage' user_pk=user.pk %}">My Page</a>
                            {% endif %}

                            {% if not user.is_authenticated %}
                            <a class="nav-link px-2" href="#">About Us</a>
                        {% endif %}
                            <!--âœ…ì„ì‹œë¡œ ë„£ìŒ! ë§í¬ëŠ” ì—°ê²° ì•ˆ í–ˆìŒ, ë“¤ì–´ê°ˆ í˜ì´ì§€ ìƒê°í•´ë´ì•¼í•¨-->

                        <!--ìœ„ì¹˜ ê²€ìƒ‰ í•„í„°ìš© ê²€ìƒ‰ì°½ => ì–´ë””ì— ë°°ì¹˜í•  ì§€ ì˜ë…¼ í•„ìš”!-->
                        </li>
                        <!--
                        <li class="nav-item">
                        ê²€ìƒ‰ ê°€ê¹Œìš´ìˆœì •ë ¬ ì‚­ì œ
                            <form action="{% url 'search' %}" method="GET" class="d-flex">
                                ì´ìœ ëŠ” ëª¨ë¥´ê² ëŠ”ë° headì— styleíƒœê·¸ ë„£ì–´ì„œ ê²€ìƒ‰ë°” í¬ê¸° ì¡°ì ˆí•˜ë©´ ì ìš©ì´ ì•ˆë˜ì–´ì„œ input íƒœê·¸ì— ìŠ¤íƒ€ì¼ ì§‘ì–´ë„£ìŒ
                                <input class="form-control me-2" type="text" placeholder="Search" aria-label="Search" name="q"
                                    style="width: 200px; height: 30px; margin-top: 5px; font-family: 'SF_HambakSnow'; border-radius: 0%; border-color: black;">
                                <button class="btn btn-secondary btn-sm" type="submit" value="r">ğŸ”</button>
                            </form>
                        </li>   
					</ul>
                -->


                    

                </div>
            </div>
        </nav>
    </header>

    <br><br><br>
    
    <!-- navë°”ì— ê°€ë ¤ì ¸ì„œ ì„ì‹œë¡œ ì¤„ë°”ê¿ˆ br -->
    <div id="back_nickname" style="margin:10% 10% 10% 10%; height: 500px;">
        <h1 style= "font-size: 50px; color: brown;">ALLCAKESì— ì˜¤ì‹ ê±¸ í™˜ì˜í•©ë‹ˆë‹¤.!!</h1>
    <h1 style="text-align: center; ">ë‹‰ë„¤ì„ ì„¤ì •</h1>
    <br><br><br>
    <form action="{% url 'submit_nickname' %}" class="nickname_form" method="POST">
        {% csrf_token %} 
        {{ form.as_p }} <button style="border-radius: 5px; margin-left: 70%;" type="submit">ì œì¶œ</button>
    </form>
    </div>

<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
</script>

<script>
    // í˜„ì¬ ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¤ëŠ” getPosition í”„ë¡œë¯¸ìŠ¤ ìƒì„±
    var getPosition = function (options) {
      return new Promise(function (resolve, reject) {
        var options = {
        enableHighAccuracy: true,
        maximumAge: 0,
        timeout: 10000
      }
        navigator.geolocation.getCurrentPosition(resolve, reject, options);
      })
    }
    // getPosition í”„ë¡œë¯¸ìŠ¤ ì‹¤í–‰
    // ê²°ê³¼ê°’ì´ ìˆì„ ê²½ìš° ì¿ í‚¤ì— ì •ë³´ë¥¼ ì €ì¥í•˜ê³ , ì—†ì„ ê²½ìš° Errorë¥¼ Logì— ì°ëŠ”ë‹¤
    getPosition()
      .then((position) => {
        $.cookie("latitude", position.coords.latitude, { path: '/' })
        $.cookie("longitude", position.coords.longitude, { path: '/' })
      })
      .catch((err)=> {
        console.log(err)
      })
</script>

</body>
</html>